---
import Tag from './Tag.astro';

// Importamos im√°genes directamente como URLs generadas por Vite
import PhotoProfile from '@assets/photo-profile.png';
import IconGitHubWhite from '@assets/icon-github-white.png';
import IconGitHubBlack from '@assets/icon-github-black.png';
import IconLinkedinWhite from '@assets/icon-linkedin-white.png';
import IconLinkedinBlack from '@assets/icon-linkedin-black.png';
import IconXWhite from '@assets/icon-x-white.png';
import IconXBlack from '@assets/icon-x-black.png';

const socialLinks = [
  {
    href: 'https://x.com/leofrp',
    lightIcon: IconXBlack,
    darkIcon: IconXWhite,
    alt: 'Twitter Icon'
  },
  {
    href: 'https://github.com/leonardofrp5',
    lightIcon: IconGitHubBlack,
    darkIcon: IconGitHubWhite,
    alt: 'GitHub Icon'
  },
  {
    href: 'https://www.linkedin.com/in/leonardo-fabian-romero-perez-516479168/',
    lightIcon: IconLinkedinBlack,
    darkIcon: IconLinkedinWhite,
    alt: 'LinkedIn Icon'
  }
];
---

<section class="w-full flex flex-col-reverse lg:flex-row justify-between items-center px-6 md:px-10 lg:px-20 py-10 relative">
  <div class="text-center lg:text-left">
    <Tag
      text="Hello I'm"
      borderRadius="rounded-tl-full rounded-tr-full rounded-br-full rounded-bl-none"
      width="w-32"
      height="h-9"
      fontSize="sm"
      fontWeight="semibold"
    />
    <h1 class="transition-colors duration-500 text-black text-4xl md:text-5xl lg:text-6xl font-semibold mt-6 dark:text-white">
      Leonardo Romero
    </h1>
    <h3 class="duration-500 text-black text-xl md:text-2xl font-bold mt-2.5 dark:text-white">
      Frontend Developer
    </h3>
    <ul class="flex justify-center lg:justify-start mt-6 gap-4">
      {socialLinks.map(({ href, lightIcon, darkIcon, alt }) => (
        <li>
          <a href={href} target="_blank" rel="noopener noreferrer">
            <img
              class="theme-icon"
              src={lightIcon.src}
              data-light-src={lightIcon.src}
              data-dark-src={darkIcon.src}
              alt={alt}
              width="30"
              height="30"
            />
          </a>
        </li>
      ))}
    </ul>
  </div>
  <img
    class="w-60 h-60 md:w-72 md:h-72 lg:w-80 lg:h-80 object-cover rounded-full border-8 border-white border-opacity-25"
    src={PhotoProfile.src}
    alt="Profile photo"
  />
</section>

<script lang="ts">
  document.addEventListener('DOMContentLoaded', () => {
    const themeIcons = document.querySelectorAll<HTMLImageElement>('img.theme-icon');

    const updateIcons = theme => {
      themeIcons.forEach(icon => {
        const newSrc = theme === 'dark' ? icon.dataset.darkSrc : icon.dataset.lightSrc;
        if (newSrc) {
          icon.src = newSrc;
        }
      });
    };

    window.addEventListener('themeChange', event => {
      const { theme } = event.detail;
      updateIcons(theme);
    });

    const currentTheme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
    updateIcons(currentTheme);
  });
</script>